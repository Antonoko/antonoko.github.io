<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Card</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            overflow: hidden;
        }

        .card {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            /* border: 1px solid #dfe1e4;
            border-radius: 8px;
            overflow: hidden; */
        }

        .card-top {
            flex: 1;
            background: #f5f6f7;
            padding: 10px 18px 10px 18px;
            display: flex;
            align-items: center;
        }

        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .info {
            flex: 1;
            min-width: 0;
        }

        .title {
            font-size: 16px;
            font-weight: 500;
            color: #1f2329;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .description {
            font-size: 13px;
            color: #767c84;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-bottom {
            height: 46px;
            background: #ffffff;
            padding: 0 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .group-text {
            font-size: 14px;
            color: #777d85;
        }

        .join-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 5px 16px;
            background: #ffffff;
            color: #1f2329;
            border: 1px solid #bbbfc4;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            text-decoration: none;
            height: 30px;
        }

        .join-button:hover {
            background: #f5f6f7;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="card-top">
            <img class="avatar" id="avatarImg" src="" alt="Group Avatar">
            <div class="info">
                <div class="title" id="titleText"></div>
                <div class="description" id="descriptionText"></div>
            </div>
        </div>
        <div class="card-bottom">
            <div class="group-text" id="groupText">Group</div>
            <a href="#" class="join-button" id="joinButton" target="_blank">åŠ å…¥</a>
        </div>
    </div>

    <script>
        console.log('ğŸ¦œ é£ä¹¦è‡ªå®šä¹‰ç¾¤ç»„å¡ç‰‡ç”Ÿæˆ | Lark Custom Group Card Generated: http://antonoko.github.io/feishu-group-card/generator.html')

        // è¯­è¨€é…ç½®
        const i18n = {
            zh: {
                join: 'åŠ å…¥',
                defaultGroup: 'ç¾¤ç»„'
            },
            en: {
                join: 'Join',
                defaultGroup: 'Group'
            }
        };

        // è·å– URL å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        
        // è·å–æµè§ˆå™¨è¯­è¨€è®¾ç½®
        const browserLang = navigator.language.toLowerCase();
        // è®¾ç½®è¯­è¨€ï¼Œä¼˜å…ˆä½¿ç”¨ URL å‚æ•°ï¼Œå…¶æ¬¡æ˜¯æµè§ˆå™¨è¯­è¨€ï¼Œé»˜è®¤è‹±æ–‡
        const lang = urlParams.get('lang') || (browserLang.startsWith('zh') ? 'zh' : 'en');
        const currentLang = ['zh', 'en'].includes(lang) ? lang : 'en';
        const texts = i18n[currentLang];

        // è®¾ç½®å¤´åƒ
        const avatarBase64 = urlParams.get('avatar');
        if (avatarBase64) {
            document.getElementById('avatarImg').src = avatarBase64;
        }
        
        // è®¾ç½®æ ‡é¢˜
        const title_zh = urlParams.get('title_zh');
        const title_en = urlParams.get('title_en');
        if (title_zh && title_en) {
            document.getElementById('titleText').textContent = currentLang === 'zh' ? decodeURIComponent(title_zh) : decodeURIComponent(title_en);
        }
        
        // è®¾ç½®æè¿°
        const description_zh = urlParams.get('description_zh');
        const description_en = urlParams.get('description_en');
        if (description_zh && description_en) {
            document.getElementById('descriptionText').textContent = currentLang === 'zh' ? decodeURIComponent(description_zh) : decodeURIComponent(description_en);
        }

        // è®¾ç½® Group æ–‡æœ¬
        const groupText_zh = urlParams.get('groupText_zh');
        const groupText_en = urlParams.get('groupText_en');
        document.getElementById('groupText').textContent = currentLang === 'zh' 
            ? (groupText_zh ? decodeURIComponent(groupText_zh) : texts.defaultGroup)
            : (groupText_en ? decodeURIComponent(groupText_en) : texts.defaultGroup);
        
        // è®¾ç½®æŒ‰é’®é“¾æ¥å’Œæ–‡æœ¬
        const joinUrl = urlParams.get('joinUrl');
        if (joinUrl) {
            document.getElementById('joinButton').href = decodeURIComponent(joinUrl);
        }
        document.getElementById('joinButton').textContent = texts.join;
    </script>
</body>
</html>